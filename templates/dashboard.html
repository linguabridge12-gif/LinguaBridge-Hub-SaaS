{% extends "base.html" %}

{% block content %}
<section class="dashboard-hero">
  <h1>Welcome back, {{ current_user.email.split('@')[0]|capitalize }}!</h1>
  <p>Your learning dashboard at a glance.</p>
</section>

<section class="dashboard-stats">
  <div class="stats-grid">
    <div class="stat-card">
      <h3>ğŸ“š Lessons Enrolled</h3>
      <p>{{ enroll_count }}</p>
    </div>
    <div class="stat-card">
      <h3>âœ… Completed Lessons</h3>
      <p>{{ completed }}</p>
    </div>
    <div class="stat-card">
      <h3>ğŸ“ Events Tracked</h3>
      <p>{{ events }}</p>
    </div>
    <div class="stat-card">
      <h3>ğŸ“– Total Lessons</h3>
      <p>{{ lessons|length }}</p>
    </div>
  </div>
</section>

<section class="dashboard-actions">
  <h2>Quick Access</h2>
  <div class="actions-grid">
    <a href="{{ url_for('all_lessons') }}" class="btn btn-primary">Browse All Lessons</a>
    <a href="{{ url_for('coach') }}" class="btn btn-outline">Request Coaching</a>
    <a href="{{ url_for('analytics') }}?key={{ request.args.get('key', '') }}" class="btn btn-outline">View Analytics (Admin)</a>
  </div>
</section>

<section class="recent-lessons">
  <h2>Recently Viewed Lessons</h2>
  <div class="lessons-grid">
    {% for lesson in lessons[:4] %}
      <div class="lesson-card">
        <h3>{{ lesson.title }}</h3>
        <p>{{ lesson.content[:80] }}...</p>
        <a href="{{ url_for('lesson', lesson_id=lesson.id) }}" class="btn btn-outline-small">Go to Lesson</a>
      </div>
    {% endfor %}
  </div>
</section>

<footer>
  <p>ğŸŒ LinguaBridge Hub â€” Track your learning, anytime, anywhere.</p>
</footer>
{% endblock %}

