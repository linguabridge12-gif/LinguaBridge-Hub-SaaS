{% extends "base.html" %}

{% block content %}
<section class="dashboard-hero">
  <h1>Welcome, {{ current_user.email }}!</h1>
  <p>Here’s a snapshot of your learning journey.</p>
</section>

<section class="dashboard-stats">
  <div class="stats-grid">
    <div class="stat-card">
      <h3>📚 Enrolled Lessons</h3>
      <p>{{ enroll_count }}</p>
    </div>
    <div class="stat-card">
      <h3>✅ Completed Lessons</h3>
      <p>{{ completed }}</p>
    </div>
    <div class="stat-card">
      <h3>📈 Activity Events</h3>
      <p>{{ events }}</p>
    </div>
  </div>
</section>

<section class="dashboard-lessons">
  <h2>Your Lessons</h2>
  <div class="lessons-grid">
    {% for lesson in lessons %}
      <div class="lesson-card">
        <h3>{{ lesson.title }}</h3>
        <p>{{ lesson.content }}</p>
        {% if lesson.quiz %}
          <button onclick="toggleQuiz('quiz-{{ lesson.id }}', {{ lesson.id }})" class="quiz-btn">Show Quiz</button>
          <div id="quiz-{{ lesson.id }}" style="display:none;">
            {% for q in lesson.quiz %}
              <p><strong>Q:</strong> {{ q.question }}</p>
              <p><strong>A:</strong> {{ q.answer }}</p>
            {% endfor %}
          </div>
        {% endif %}
        <a href="{{ url_for('feedback', lesson_id=lesson.id) }}" class="btn btn-outline">Give Feedback</a>
      </div>
    {% endfor %}
  </div>
</section>

<section class="dashboard-actions">
  <h2>Quick Actions</h2>
  <div class="actions-grid">
    <a href="{{ url_for('coach') }}" class="btn btn-primary">Request Coaching</a>
    <a href="{{ url_for('lessons') }}" class="btn btn-outline">Browse All Lessons</a>
  </div>
</section>

<footer>
  <p>🌐 LinguaBridge Hub — Track, Learn, and Grow</p>
</footer>

<script src="{{ url_for('static', filename='script.js') }}"></script>
{% endblock %}
